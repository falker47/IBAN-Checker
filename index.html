<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>IBAN Checker (1 Char / Swap)</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <h1>IBAN Checker (1 Char / Swap)</h1>
    <p class="subtitle">
      Inserisci l'IBAN, oppure clicca l' <strong>icona</strong> per incollarlo dagli Appunti.<br/>
      Poi premi il pulsante per verificare.
    </p>

    <label for="ibanInput" class="label">IBAN:</label>
    <div class="input-wrapper">
      <input
        type="text"
        id="ibanInput"
        class="input-iban"
        placeholder="es. IT60X0542811101000000123456"
      />
      <button
        class="btn-paste"
        onclick="pasteIban()"
        title="Incolla IBAN dagli Appunti"
      >
        <!-- icona clipboard SVG -->
        <svg
          width="18"
          height="18"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path
            d="M16 4H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z"
          />
          <rect x="9" y="2" width="6" height="4" rx="1" ry="1" />
        </svg>
      </button>
    </div>

    <button class="btn-verify" onclick="checkIBAN()">Verifica IBAN</button>

    <div id="result" class="result-box"></div>
  </div>

<script>
/****************************************************
 * Incolla dagli Appunti
 ****************************************************/
function pasteIban() {
  if (!navigator.clipboard || !navigator.clipboard.readText) {
    alert("La funzionalità di incolla non è supportata dal tuo browser o non è sicura.");
    return;
  }
  navigator.clipboard.readText()
    .then(text => {
      document.getElementById("ibanInput").value = text;
    })
    .catch(err => {
      console.error("Errore durante la lettura degli appunti:", err);
      alert("Impossibile incollare: manca il permesso o il browser non è compatibile.");
    });
}

/****************************************************
 * Resto del codice: isIbanValid, isItalianIbanStructure...
 * (lo puoi copiare identico a prima)
 ****************************************************/

function isIbanValid(iban) {
  // ... (come prima)
}
function isItalianIbanStructure(iban) {
  // ... (come prima)
}
function formatIbanItalian(iban) {
  // ... (come prima)
}
function findSingleCharCorrectionsItalian(ibanOrig) {
  // ... (come prima)
}
function findSwapCorrectionsItalian(ibanOrig) {
  // ... (come prima)
}
function findAllCorrectionsItalian(ibanOrig) {
  // ... (come prima)
}

function checkIBAN() {
  // ... (stessa logica di prima: controlli lunghezza, correzioni, output in #result)
}
</script>
</body>
</html>
